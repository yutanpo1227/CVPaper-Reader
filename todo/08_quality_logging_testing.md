## 品質/ロギング/テスト 計画

### 背景/目的
- 障害時のトラブルシュート容易化と品質担保。

### スコープ
- 含む: ログ方針、メトリクス（件数/失敗数/所要時間）、ユニット/結合テスト観点。
- 含まない: 本番監視の具体的SaaS選定（別タスク）。

### 実施手順
1. ログ: `loguru` を統一採用（crawler）。構造化（key=value）と回転。
2. メトリクス: 件数/失敗/再試行/所要時間を集計出力。
3. 例外: 失敗ケース別に明示（ネットワーク/パース/DB）。
4. テスト: 主要関数のユニットテスト（正規化、重複判定、埋め込み生成のI/F）。
5. E2E: スモールデータで通し実行の`--dry-run`。

### 実装/設定メモ
- Python: `pytest` 導入、`pytest -q` をCIで実行。
- Next.js: `/api/search` のハンドラはパラメータバリデーション（zod）。

### 検証観点
- 例外時に適切なログが残り、再現可能性がある。
- 基本関数の単体テストが通る。

### 完了条件（DoD）
- ログ方針と主要テスト観点が文書化され、最小テストが実行可能。


